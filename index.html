<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Таблица за проследимост на ремонти</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f7fa; margin: 0; padding: 20px; }
  h1 { text-align: center; color: #333; }
  table { width: 100%; border-collapse: collapse; background: #fff; }
  th, td { padding: 12px 8px; border: 1px solid #ddd; text-align: left; }
  th { background: #2c3e50; color: white; }
  tr:nth-child(even) { background: #f2f2f2; }
  .urgent { background-color: #f8d7da; }
  .chat-box {
    position: fixed;
    bottom: 20px; right: 20px;
    width: 300px; height: 400px;
    background: white; border: 1px solid #ccc;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    display: flex; flex-direction: column;
  }
  .chat-header {
    background: #34495e; color: white; padding: 10px; font-weight: bold;
  }
  .chat-messages {
    flex: 1; padding: 10px; overflow-y: auto; font-size: 14px;
    background: #ecf0f1;
  }
  .chat-input {
    border-top: 1px solid #ccc; padding: 10px;
  }
  .chat-input input {
    width: 100%; padding: 8px; box-sizing: border-box;
  }
</style>
</head>
<body>

<h1>Таблица за проследимост на ремонти</h1>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Матрица</th>
      <th>Клиент</th>
      <th>Тип ремонт</th>
      <th>Дата на ремонт</th>
      <th>Краен срок</th>
      <th>Статус</th>
      <th>Телефон</th>
      <th>SMS статус</th>
      <th>Бележки</th>
      <th>AI оценка (вероятност за закъснение)</th>
    </tr>
  </thead>
  <tbody>
    <tr class="urgent">
      <td>1</td>
      <td>Матрица A123</td>
      <td>Фирма Х</td>
      <td>Ремонт на захранване</td>
      <td>2025-05-10</td>
      <td>2025-05-20</td>
      <td>В процес</td>
      <td>+359888123456</td>
      <td>Изпратено</td>
      <td>Трябва спешна проверка</td>
      <td>80%</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Матрица B456</td>
      <td>Фирма Y</td>
      <td>Подмяна на щифтове</td>
      <td>2025-05-01</td>
      <td>2025-05-25</td>
      <td>Очаква</td>
      <td>+359877654321</td>
      <td>Не е изпратено</td>
      <td>Нормално протичане</td>
      <td>10%</td>
    </tr>
  </tbody>
</table>

<!-- Чат в реално време -->
<div class="chat-box">
  <div class="chat-header">Чат (Реално време)</div>
  <div class="chat-messages" id="chatMessages">
    <!-- Съобщения ще се появяват тук -->
  </div>
  <div class="chat-input">
    <input type="text" id="chatInput" placeholder="Напиши съобщение и натисни Enter..." />
  </div>
</div>

<script>
  const chatMessages = document.getElementById('chatMessages');
  const chatInput = document.getElementById('chatInput');

  chatInput.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' && chatInput.value.trim() !== '') {
      const msg = document.createElement('div');
      msg.textContent = 'Ти: ' + chatInput.value;
      chatMessages.appendChild(msg);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      chatInput.value = '';
      
      // TODO: изпрати съобщението към сървър / WebSocket
    }
  });
</script>

</body>
</html>
